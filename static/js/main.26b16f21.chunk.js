(this.webpackJsonpreactweather=this.webpackJsonpreactweather||[]).push([[0],{50:function(e,t,a){e.exports=a(62)},55:function(e,t,a){},59:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(9),i=a.n(o),l=(a(55),a(20)),c=a.n(l),s=a(30),u=a(36),m=a(37),h=a(47),d=a(38),p=a(48),b=a(45);a(59),a(60);function f(e){var t=Math.round(e);return t<-40&&(t=-40),t>40&&(t=40),function(e,t,a){t/=100,a/=100;var r=(1-Math.abs(2*a-1))*t,n=r*(1-Math.abs(e/60%2-1)),o=a-r/2,i=0,l=0,c=0;0<=e&&e<60?(i=r,l=n,c=0):60<=e&&e<120?(i=n,l=r,c=0):120<=e&&e<180?(i=0,l=r,c=n):180<=e&&e<240?(i=0,l=n,c=r):240<=e&&e<300?(i=n,l=0,c=r):300<=e&&e<360&&(i=r,l=0,c=n);i=Math.round(255*(i+o)).toString(16),l=Math.round(255*(l+o)).toString(16),c=Math.round(255*(c+o)).toString(16),1===i.length&&(i="0"+i);1===l.length&&(l="0"+l);1===c.length&&(c="0"+c);return"#"+i+l+c}(320-4*(t+40),100,50)}var v=a(72),E=a(71),g=a(70),y=function(e){var t=e.temperature,a=e.color;return n.a.createElement("div",null,n.a.createElement("header",{className:"App-main",style:{backgroundColor:a}},n.a.createElement("h1",{className:"App-temperature"},t,"\xb0C")),n.a.createElement("section",{className:"App-main-bottom",style:{backgroundColor:a}},n.a.createElement("p",null,"\u2193 More data below \u2193")))},w=function(){return n.a.createElement("footer",{className:"App-footer"},n.a.createElement("p",null,"Made by ",n.a.createElement("a",{href:"https://github.com/Jontzii",target:"_blank",rel:"noopener noreferrer",className:"App-link"},"Jontzi")))},k=function(e){var t=e.body,a=e.extra;return n.a.createElement("div",null,n.a.createElement("h3",null,"Dewpoint: ",t[0].dewpoint.toString().substr(0,5),"\xb0C ",n.a.createElement("br",null),"Humidity: ",t[0].humidity.toString().substr(0,5),"% ",n.a.createElement("br",null),"Pressure: ",t[0].pressure.toString().substr(0,4),".",t[0].pressure.toString().substr(4,2)," hPa ",n.a.createElement("br",null),"Air density: ",t[0].air_density.toString().substr(0,4)," kg/m3"),n.a.createElement("p",null,n.a.createElement("br",null),"Measured at ",a[0]," ",n.a.createElement("br",null)," on ",a[1]," ",n.a.createElement("br",null)," ",n.a.createElement("br",null),"Next update in ",a[2]," seconds"))},N=function(e){var t=e.timer;return n.a.createElement("header",{className:"App-main-error"},n.a.createElement("h1",null,"Error while loading data"),n.a.createElement("p",null,"This might be a problem with the server. ",n.a.createElement("br",null),n.a.createElement("br",null),"Trying again in ",t," seconds"))};b.a.initialize("UA-131317095-3");var D=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).api_key="mB2Oko638Vjt4o0H8m6nwpiIRVrRM4Eh",a.state={error:null,initialLoaded:!1,body:[],measurementDate:"",measurementTime:"",timer:0,timerDefault:60,color:"#282c34",colorDefault:"#282c34"},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval(Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.timerControl();case 1:case"end":return t.stop()}}),t)}))),1e3)}},{key:"fetchData",value:function(){var e=this,t=this.state,a=t.timerDefault,r=t.colorDefault;t.color;try{fetch("https://data.jontzi.com/weather/api/1/latest?api_key="+this.api_key).then((function(e){return e.json()})).then((function(t){var a=function(e){var t=[],a=new Date(e);return t[0]=a.toLocaleDateString("en-FI"),t[1]=a.toLocaleTimeString("en-FI"),t}(t.body[0].time),r=f(t.body[0].temperature);e.setState({initialLoaded:!0,body:t.body,measurementDate:a[0],measurementTime:a[1],color:r})}),(function(t){console.log(t),e.setState({initialLoaded:!0,error:t,color:r})}))}catch(n){console.log(n)}this.setState({timer:a})}},{key:"timerControl",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.state.timer)>0?(a=t-1,this.setState({timer:a})):this.fetchData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateNow",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.initialLoaded,r=e.body,o=e.measurementDate,i=e.measurementTime,l=e.timer,c=e.color;if(t)return n.a.createElement("div",{className:"App"},n.a.createElement(N,{timer:l}),n.a.createElement(v.a,{variant:"outline-light",onClick:this.updateNow.bind(this)},"Try again now"));if(a){var s=[i,o,l];return n.a.createElement("div",{className:"App"},n.a.createElement(y,{temperature:r[0].temperature,color:c}),n.a.createElement("div",{className:"App-extra"},n.a.createElement(k,{body:r,extra:s}),n.a.createElement(E.a,{placement:"right",delay:{show:250,hide:100},overlay:n.a.createElement(g.a,{id:"button-tooltip"},"Please note that excessive updating will be limited by server")},n.a.createElement(v.a,{variant:"outline-light",onClick:this.updateNow.bind(this)},"Update now"))),n.a.createElement(w,null))}return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-main-error"},n.a.createElement("h2",null,"Loading...")))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.26b16f21.chunk.js.map