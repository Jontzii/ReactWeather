(this.webpackJsonpreactweather=this.webpackJsonpreactweather||[]).push([[0],{49:function(e,t,a){e.exports=a(61)},54:function(e,t,a){},56:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),o=a.n(i),l=(a(54),a(20)),s=a.n(l),c=a(30),m=a(36),u=a(37),p=a(46),h=a(38),d=a(47),b=(a(56),a(57),a(69)),f=a(68),E=a(70),v=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).api_key="mB2Oko638Vjt4o0H8m6nwpiIRVrRM4Eh",a.state={error:null,initialLoaded:!1,body:[],measurementDate:"",measurementTime:"",timer:0,timerDefault:60},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval(Object(c.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.timerControl();case 1:case"end":return t.stop()}}),t)}))),1e3)}},{key:"fetchData",value:function(){var e=this,t=this.state.timerDefault;try{fetch("https://data.jontzi.com/weather/api/1/latest?api_key="+this.api_key).then((function(e){return e.json()})).then((function(t){var a=e.parseDatetime(t.body[0].time);e.setState({initialLoaded:!0,body:t.body,measurementDate:a[0],measurementTime:a[1]})}),(function(t){console.log(t),e.setState({initialLoaded:!0,error:t})}))}catch(a){console.log(a)}this.setState({timer:t})}},{key:"parseDatetime",value:function(e){var t=[],a=new Date(e);return t[0]=a.toLocaleDateString("en-FI"),t[1]=a.toLocaleTimeString("en-FI"),t}},{key:"timerControl",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.state.timer)>0?(a=t-1,this.setState({timer:a})):this.fetchData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateNow",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.initialLoaded,n=e.body,i=e.measurementDate,o=e.measurementTime,l=e.timer;return t?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-main-error"},r.a.createElement("h1",null,"Error while loading data"),r.a.createElement("p",null,"This might be a problem with the server"))):a?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-main"},r.a.createElement("h1",{className:"App-temperature"},n[0].temperature,"\xb0C")),r.a.createElement("section",{className:"App-main-bottom"},r.a.createElement("p",null,"\u2193 More data below \u2193")),r.a.createElement("section",{className:"App-extra"},r.a.createElement("h3",null,"Dewpoint: ",n[0].dewpoint.toString().substr(0,5),"\xb0C ",r.a.createElement("br",null),"Humidity: ",n[0].humidity.toString().substr(0,5),"% ",r.a.createElement("br",null),"Pressure: ",n[0].pressure.toString().substr(0,4),".",n[0].pressure.toString().substr(4,2)," hPa ",r.a.createElement("br",null),"Air density: ",n[0].air_density.toString().substr(0,4)," kg/m3"),r.a.createElement("p",null,r.a.createElement("br",null),"Measured at ",o," ",r.a.createElement("br",null)," on ",i," ",r.a.createElement("br",null)," ",r.a.createElement("br",null),"Measurements are updated once per minute.",r.a.createElement("br",null),"Next update in ",l," seconds"),r.a.createElement(b.a,{placement:"right",delay:{show:250,hide:400},overlay:r.a.createElement(f.a,{id:"button-tooltip"},"Please note that excessive updating will be limited by server")},r.a.createElement(E.a,{variant:"outline-light",onClick:this.updateNow.bind(this)},"Update now"))),r.a.createElement("footer",{className:"App-footer"},r.a.createElement("p",null,"Made by ",r.a.createElement("a",{href:"https://github.com/Jontzii",target:"_blank",rel:"noopener noreferrer",className:"App-link"},"Jontzi")))):r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-main-error"},r.a.createElement("h2",null,"Loading...")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.98695869.chunk.js.map